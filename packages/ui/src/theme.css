/* ═══ @opensession/ui — shared theme ═══
 * Import in your app.css:
 *   @import 'tailwindcss';
 *   @import '@opensession/ui/theme.css';
 */

/* ─── Dark theme (default) ─── */
@theme {
	--color-bg-primary: #0d1017;
	--color-bg-secondary: #171c28;
	--color-bg-tertiary: #1f2636;
	--color-bg-hover: #283044;
	--color-border: #384466;
	--color-border-light: #4a5880;
	--color-text-primary: #e4e8f2;
	--color-text-secondary: #8b96b8;
	--color-text-muted: #5c6a8a;
	--color-accent: #3b82f6;
	--color-tool-claude: #f97316;
	--color-tool-cursor: #3b82f6;
	--color-tool-codex: #10b981;
	--color-tool-opencode: #f59e0b;
	--color-tool-cline: #ef4444;
	--color-tool-amp: #a855f7;
	--color-tool-gemini: #4285f4;
	--color-tool-default: #6b7280;
	--color-success: #22c55e;
	--color-error: #ef4444;
	--color-warning: #eab308;
	--color-role-human: #50b464;
	--color-role-agent: #648cdc;
	--color-role-tool: #ffa657;
}

html {
	background-color: var(--color-bg-primary);
	color: var(--color-text-primary);
	font-size: 16.5px;
}

body {
	font-family: "JetBrains Mono", "SF Mono", "Fira Code", monospace;
	font-size: 14px;
	line-height: 1.5;
	-webkit-font-smoothing: antialiased;
}

/* ─── Light theme overrides ─── */
html.light {
	--color-bg-primary: #fafaf5;
	--color-bg-secondary: #f0f0ea;
	--color-bg-tertiary: #e8e8e2;
	--color-bg-hover: #ddddd7;
	--color-border: #e0e0d8;
	--color-border-light: #d0d0c8;
	--color-text-primary: #1a1a1a;
	--color-text-secondary: #555555;
	--color-text-muted: #999999;
	--color-accent: #2563eb;
}

/* ─── Scrollbar styles ─── */
::-webkit-scrollbar {
	width: 6px;
	height: 6px;
}

::-webkit-scrollbar-track {
	background: var(--color-bg-secondary);
}

::-webkit-scrollbar-thumb {
	background: var(--color-border-light);
	border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
	background: var(--color-text-muted);
}

/* ═══ highlight.js — dark theme (GitHub Dark) ═══ */
.hljs {
	color: #c9d1d9;
}
.hljs-comment,
.hljs-quote {
	color: #8b949e;
	font-style: italic;
}
.hljs-keyword,
.hljs-selector-tag,
.hljs-type {
	color: #ff7b72;
}
.hljs-string,
.hljs-attr,
.hljs-addition {
	color: #a5d6ff;
}
.hljs-number,
.hljs-literal {
	color: #79c0ff;
}
.hljs-built_in,
.hljs-builtin-name {
	color: #ffa657;
}
.hljs-function {
	color: #d2a8ff;
}
.hljs-title,
.hljs-title\.function {
	color: #d2a8ff;
}
.hljs-variable,
.hljs-params {
	color: #c9d1d9;
}
.hljs-symbol,
.hljs-bullet {
	color: #ffa657;
}
.hljs-meta {
	color: #79c0ff;
}
.hljs-deletion {
	color: #ffa198;
	background: rgba(248, 81, 73, 0.1);
}
.hljs-addition {
	color: #7ee787;
	background: rgba(63, 185, 80, 0.1);
}
.hljs-selector-class,
.hljs-selector-id {
	color: #7ee787;
}
.hljs-emphasis {
	font-style: italic;
}
.hljs-strong {
	font-weight: bold;
}

/* ─── Z-index scale ─── */
:root {
	--z-graph: 0;
	--z-graph-dot: 1;
	--z-minimap: 10;
	--z-scanline: 50;
}

/* ─── Focus styles ─── */
:focus-visible {
	outline: 2px solid var(--color-accent);
	outline-offset: 1px;
}

/* ─── TUI badge styles ─── */
.tui-badge {
	display: inline-block;
	padding: 0 4px;
	font-size: 10px;
	font-weight: 700;
}
.tui-badge-user {
	background: #50b464;
	color: #0d1017;
}
.tui-badge-agent {
	background: #648cdc;
	color: #0d1017;
}
.tui-badge-system {
	background: #555a6e;
	color: #d0d4e0;
}
.tui-badge-tool {
	color: #0d1017;
}

html.light .tui-badge-user {
	color: #1a1a1a;
}
html.light .tui-badge-agent {
	color: #1a1a1a;
}
html.light .tui-badge-tool {
	color: #1a1a1a;
}

/* ═══ highlight.js — light theme overrides ═══ */
html.light .hljs {
	color: #24292e;
}
html.light .hljs-comment,
html.light .hljs-quote {
	color: #6a737d;
}
html.light .hljs-keyword,
html.light .hljs-selector-tag,
html.light .hljs-type {
	color: #d73a49;
}
html.light .hljs-string,
html.light .hljs-attr {
	color: #032f62;
}
html.light .hljs-number,
html.light .hljs-literal {
	color: #005cc5;
}
html.light .hljs-built_in,
html.light .hljs-builtin-name {
	color: #e36209;
}
html.light .hljs-function,
html.light .hljs-title,
html.light .hljs-title\.function {
	color: #6f42c1;
}
html.light .hljs-variable,
html.light .hljs-params {
	color: #24292e;
}
html.light .hljs-symbol,
html.light .hljs-bullet {
	color: #e36209;
}
html.light .hljs-meta {
	color: #005cc5;
}
html.light .hljs-deletion {
	color: #b31d28;
	background: rgba(255, 220, 220, 0.5);
}
html.light .hljs-addition {
	color: #22863a;
	background: rgba(220, 255, 220, 0.5);
}
html.light .hljs-selector-class,
html.light .hljs-selector-id {
	color: #22863a;
}

/* ═══ Code block with line numbers ═══ */
.code-header {
	display: flex;
	align-items: center;
	border-bottom: 1px solid var(--color-border);
	background: var(--color-bg-secondary);
	padding: 4px 12px;
}
.code-header span {
	font-size: 10px;
	font-weight: 500;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	color: var(--color-text-muted);
}

.code-with-lines {
	display: flex;
	overflow-x: auto;
	background: var(--color-bg-primary);
}
.code-with-lines .line-nums {
	flex-shrink: 0;
	padding: 12px 0;
	text-align: right;
	user-select: none;
	border-right: 1px solid var(--color-border);
	background: var(--color-bg-primary);
	color: var(--color-text-muted);
	font-size: 11px;
	line-height: 1.6;
	font-family: "SF Mono", "Fira Code", "Cascadia Code", monospace;
}
.code-with-lines .line-nums span {
	display: block;
	padding: 0 8px 0 12px;
	min-width: 2.5em;
}
.code-with-lines .code-body {
	flex: 1;
	overflow-x: auto;
	padding: 12px;
	margin: 0;
	font-size: 12px;
	line-height: 1.6;
	font-family: "SF Mono", "Fira Code", "Cascadia Code", monospace;
}

/* ═══ Markdown content styles ═══ */
.md-content .md-heading {
	font-weight: 600;
	color: var(--color-text-primary);
	margin-top: 1.25em;
	margin-bottom: 0.6em;
	line-height: 1.42;
	letter-spacing: 0.01em;
}
.md-content .md-h1 {
	font-size: 1.25em;
}
.md-content .md-h2 {
	font-size: 1.15em;
}
.md-content .md-h3 {
	font-size: 1.05em;
}
.md-content .md-h4,
.md-content .md-h5,
.md-content .md-h6 {
	font-size: 1em;
}

.md-content {
	color: var(--color-text-primary);
	line-height: 1.8;
}

.md-content .md-p {
	margin: 0.7em 0;
	line-height: 1.82;
	color: var(--color-text-primary);
}
.md-content .md-p:first-child {
	margin-top: 0;
}
.md-content .md-p:last-child {
	margin-bottom: 0;
}

.md-content .md-list {
	margin: 0.75em 0 0.9em;
	padding-left: 1.65em;
}
.md-content ul.md-list {
	list-style-type: disc;
}
.md-content ol.md-list {
	list-style-type: decimal;
}
.md-content .md-list li {
	margin: 0.38em 0;
	line-height: 1.75;
	color: var(--color-text-primary);
}
.md-content .md-list li::marker {
	color: var(--color-accent);
}

.md-content .md-blockquote {
	border-left: 3px solid #4f84f7;
	background: rgba(79, 132, 247, 0.08);
	padding: 0.5em 1em;
	margin: 0.8em 0;
	color: var(--color-text-secondary);
}
html.light .md-content .md-blockquote {
	border-left-color: #2563eb;
	background: rgba(37, 99, 235, 0.08);
	color: #334155;
}

.md-content .md-inline-code {
	background: var(--color-bg-hover);
	border: 1px solid var(--color-border);
	padding: 1px 5px;
	font-size: 0.85em;
	font-family: "SF Mono", "Fira Code", monospace;
	color: #ff7b72;
}
html.light .md-content .md-inline-code {
	color: #d73a49;
}

.md-content .md-code-block {
	margin: 0.95em 0;
	border: 1px solid var(--color-border);
	overflow: hidden;
}
.md-content .md-code-block .md-code-header {
	display: flex;
	align-items: center;
	border-bottom: 1px solid var(--color-border);
	background: var(--color-bg-secondary);
	padding: 4px 12px;
}
.md-content .md-code-block .md-code-header span {
	font-size: 10px;
	font-weight: 500;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	color: var(--color-text-muted);
}
.md-content .md-code-block pre {
	background: var(--color-bg-primary);
	padding: 12px;
	margin: 0;
	overflow-x: auto;
	font-size: 12px;
	line-height: 1.6;
	font-family: "SF Mono", "Fira Code", "Cascadia Code", monospace;
}

.md-content .md-link {
	color: var(--color-accent);
	text-decoration: none;
	font-weight: 500;
}
.md-content .md-link:hover {
	text-decoration: underline;
}

.md-content strong {
	font-weight: 700;
	color: #ffffff;
}
.md-content em {
	font-style: italic;
	opacity: 0.95;
}
.md-content strong em,
.md-content em strong {
	font-weight: 700;
	font-style: italic;
	color: #ffffff;
}

html.light .md-content strong {
	color: #0a0a0a;
}
html.light .md-content strong em,
html.light .md-content em strong {
	color: #0a0a0a;
}

.md-content .md-table-wrap {
	overflow-x: auto;
	margin: 0.75em 0;
}
.md-content .md-table {
	border-collapse: collapse;
	width: 100%;
	font-size: 0.875em;
}
.md-content .md-table th,
.md-content .md-table td {
	border: 1px solid var(--color-border);
	padding: 6px 12px;
	text-align: left;
}
.md-content .md-table th {
	background: var(--color-bg-secondary);
	font-weight: 600;
}

.md-content .md-hr {
	border: none;
	border-top: 1px solid var(--color-border);
	margin: 1em 0;
}

.md-content .md-img {
	max-width: 100%;
	max-height: 20rem;
	margin: 0.5em 0;
}

/* ═══ Event view collapsed styles ═══ */
.ev-collapsed {
	max-height: 24rem;
	overflow: hidden;
	mask-image: linear-gradient(to bottom, black 70%, transparent 100%);
	-webkit-mask-image: linear-gradient(to bottom, black 70%, transparent 100%);
}
.ev-collapsed-code {
	max-height: 20rem;
	overflow: hidden;
	mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
	-webkit-mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
}

/* ═══ Inline diff styles ═══ */
.diff-add {
	background: rgba(63, 185, 80, 0.15);
	color: #7ee787;
}
.diff-del {
	background: rgba(248, 81, 73, 0.15);
	color: #ffa198;
}
.diff-hunk {
	color: #79c0ff;
	font-style: italic;
}
.diff-ctx {
	color: var(--color-text-secondary);
}

/* Light theme diff overrides */
html.light .diff-add {
	background: rgba(63, 185, 80, 0.15);
	color: #22863a;
}
html.light .diff-del {
	background: rgba(248, 81, 73, 0.15);
	color: #b31d28;
}
html.light .diff-hunk {
	color: #005cc5;
}

/* ═══ DiffView layout ═══ */
.diff-view {
	font-size: 12px;
	line-height: 1.6;
	font-family: "SF Mono", "Fira Code", "Cascadia Code", monospace;
}
.diff-line {
	display: flex;
	padding: 0 12px 0 0;
}
.diff-gutter {
	flex-shrink: 0;
	width: 3.5em;
	text-align: right;
	padding: 0 6px;
	user-select: none;
	color: var(--color-text-muted);
	border-right: 1px solid var(--color-border);
}
.diff-text {
	flex: 1;
	padding-left: 8px;
	white-space: pre-wrap;
	word-break: break-all;
}
