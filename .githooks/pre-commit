#!/bin/sh
# Pre-commit hook: format check, lint, and test
set -e

echo "Running cargo fmt check..."
cargo fmt --all -- --check

echo "Running cargo clippy..."
cargo clippy --workspace --exclude opensession-worker -- -D warnings

echo "Running tests..."
cargo test -p opensession-daemon --quiet

echo "All checks passed."
